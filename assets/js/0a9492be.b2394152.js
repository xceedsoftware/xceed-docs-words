"use strict";(self.webpackChunkxceed_libs_doc=self.webpackChunkxceed_libs_doc||[]).push([[8483],{42291:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>d,frontMatter:()=>s,metadata:()=>a,toc:()=>l});var n=r(74848),i=r(28453);r(11470),r(19365);const s={title:"Encrypting and decrypting"},o="Encryption and decryption",a={id:"code-snippets/other/encrypt-decrypt",title:"Encrypting and decrypting",description:"The zip format supports a light encryption algorithm which uses a string password to encrypt its data. This type of encryption can resist attacks by amateurs if the password is well chosen and long enough (at least 16 characters), but it will probably not resist attacks by determined users or experts. Therefore, we suggest that you always use long passwords, and when possible, do not rely solely on this encryption system to protect sensitive data.",source:"@site/zip/code-snippets/other/encrypt-decrypt.md",sourceDirName:"code-snippets/other",slug:"/code-snippets/other/encrypt-decrypt",permalink:"/xceed-libs-doc/zip/code-snippets/other/encrypt-decrypt",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"Encrypting and decrypting"},sidebar:"sidebarzip",previous:{title:"Copying items to a folder",permalink:"/xceed-libs-doc/zip/code-snippets/other/copy-items-folder"},next:{title:"Tar & GZip capabilities",permalink:"/xceed-libs-doc/zip/category/tar--gzip-capabilities"}},c={},l=[{value:"Encrypting files",id:"encrypting-files",level:2},{value:"Decrypting files",id:"decrypting-files",level:2},{value:"Accessing the contents of an encrypted ZippedFile object",id:"accessing-the-contents-of-an-encrypted-zippedfile-object",level:2}];function p(e){const t={admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"encryption-and-decryption",children:"Encryption and decryption"})}),"\n",(0,n.jsxs)(t.p,{children:["The zip format supports a light encryption algorithm which uses a string password to encrypt its data. This type of encryption can resist attacks by amateurs if the password is well chosen and long enough (at least 16 characters), but it will probably not resist attacks by determined users or experts. Therefore, we suggest that you always use long passwords, and when possible, ",(0,n.jsx)(t.strong,{children:"do not rely solely on this encryption system to protect sensitive data."})]}),"\n",(0,n.jsx)(t.admonition,{type:"tip",children:(0,n.jsx)(t.p,{children:"The length of the password is not limited. However, to preserve compatibility with Xceed Zip Compression Library (an ActiveX component) and with many popular Zip compression utilities, it is recommended that you limit passwords to no greater than 80 characters."})}),"\n",(0,n.jsx)(t.h2,{id:"encrypting-files",children:"Encrypting files"}),"\n",(0,n.jsxs)(t.p,{children:["In order to encrypt files you are copying to a zip file, the ",(0,n.jsx)(t.code,{children:"DefaultEncryptionPassword"})," property of the corresponding ",(0,n.jsx)(t.code,{children:"ZipArchive"})," object must be set.   The ",(0,n.jsx)(t.code,{children:"ZipArchive"})," class represents both the root folder of a zip file as well as the zip file itself.   A reference on the corresponding ",(0,n.jsx)(t.code,{children:"ZipArchive"})," object can be obtained using the RootFolder property of any ZippedFile or ",(0,n.jsx)(t.code,{children:"ZippedFolder"})," object."]}),"\n",(0,n.jsxs)(t.p,{children:["When files are added to the zip file, the ",(0,n.jsx)(t.code,{children:"DefaultEncryptionPassword"})," property of the ",(0,n.jsx)(t.code,{children:"ZipArchive"})," object is consulted and the password that is assigned to this property is used to encrypt the files. If the ",(0,n.jsx)(t.code,{children:"DefaultEncryptionPassword"})," property is not set, then the files are not encrypted."]}),"\n",(0,n.jsx)(t.h2,{id:"decrypting-files",children:"Decrypting files"}),"\n",(0,n.jsxs)(t.p,{children:["In order to decrypt files you are extracting from a zip file, the ",(0,n.jsx)(t.code,{children:"DefaultDecryptionPassword"})," property of the corresponding ZipArchive object must be set. The ZipArchive class represents both the root of a zip file as well as the zip file itself. A reference on the corresponding ZipArchive object can be obtained by using the RootFolder property of any ZippedFile or ZippedFolder object."]}),"\n",(0,n.jsxs)(t.p,{children:["When extracting encrypted files, the ",(0,n.jsx)(t.code,{children:"DefaultDecryptionPassword"})," property of the ZipArchive object is consulted and the password that is assigned to this property is used to decrypt the files. In the case where you are trying to extract an encrypted file without setting the ",(0,n.jsx)(t.code,{children:"DefaultDecryptionPassword"})," of the ZipArchive object or with an invalid password, an exception will be thrown."]}),"\n",(0,n.jsx)(t.h2,{id:"accessing-the-contents-of-an-encrypted-zippedfile-object",children:"Accessing the contents of an encrypted ZippedFile object"}),"\n",(0,n.jsxs)(t.p,{children:["In order to access the contents of an encrypted ZippedFile object, an overload of the ",(0,n.jsx)(t.code,{children:"OpenWrite"})," or ",(0,n.jsx)(t.code,{children:"OpenRead"})," methods that takes a password as a parameter must be used."]}),"\n",(0,n.jsx)(t.p,{children:"Open an instance of a ZippedFile object for reading:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-csharp",children:'      using Xceed.FileSystem;\r\n      using Xceed.Zip;\r\n      using Xceed.Compression;\r\n      using System.IO;\r\n\r\n      ZippedFile file = new ZippedFile( new DiskFile( @"c:\\test.zip" ), @"file.txt" ); \r\n\r\n      Stream s = file.OpenRead( FileShare.Read, "password" );\r\n\r\n      // You can also use the default encryption password specified in the\r\n      // DefaultDecryptionPassword property of the corresponding ZipArchive object: \r\n\r\n      ZippedFile file = new ZippedFile( new DiskFile( @"c:\\test.zip" ), @"file.txt" );\r\n      ZipArchive archive = ( ZipArchive )file.RootFolder; \r\n\r\n      Stream s = file.OpenRead( FileShare.Read, archive.DefaultDecryptionPassword ); \r\n\r\n      //Open an instance of a ZippedFile object for writing: \r\n\r\n      ZippedFile file = new ZippedFile( new DiskFile( @"c:\\test.zip" ), @"file.txt" ); \r\n\r\n      Stream s = file.OpenWrite( FileShare.Write, CompressionMethod.Deflated,\r\n                                CompressionLevel.Normal, "password" ); \r\n\r\n      // You can also use the default compression method and level as well\r\n      // as the default encryption password of the corresponding ZipArchive object: \r\n\r\n      ZippedFile file = new ZippedFile( new DiskFile( @"c:\\test.zip" ), @"file.txt" );\r\n      ZipArchive archive = ( ZipArchive )file.RootFolder; \r\n\r\n      archive.DefaultEncryptionPassword = "password"; \r\n\r\n      Stream s = file.OpenWrite( FileShare.Write, archive.DefaultCompressionMethod,\r\n                                archive.DefaultCompressionLevel, archive.DefaultEncryptionPassword );\n'})})]})}function d(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(p,{...e})}):p(e)}},19365:(e,t,r)=>{r.d(t,{A:()=>o});r(96540);var n=r(34164);const i={tabItem:"tabItem_Ymn6"};var s=r(74848);function o(e){let{children:t,hidden:r,className:o}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,n.A)(i.tabItem,o),hidden:r,children:t})}},11470:(e,t,r)=>{r.d(t,{A:()=>j});var n=r(96540),i=r(34164),s=r(23104),o=r(56347),a=r(205),c=r(57485),l=r(31682),p=r(70679);function d(e){return n.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,n.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function u(e){const{values:t,children:r}=e;return(0,n.useMemo)((()=>{const e=t??function(e){return d(e).map((e=>{let{props:{value:t,label:r,attributes:n,default:i}}=e;return{value:t,label:r,attributes:n,default:i}}))}(r);return function(e){const t=(0,l.XI)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,r])}function h(e){let{value:t,tabValues:r}=e;return r.some((e=>e.value===t))}function f(e){let{queryString:t=!1,groupId:r}=e;const i=(0,o.W6)(),s=function(e){let{queryString:t=!1,groupId:r}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!r)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return r??null}({queryString:t,groupId:r});return[(0,c.aZ)(s),(0,n.useCallback)((e=>{if(!s)return;const t=new URLSearchParams(i.location.search);t.set(s,e),i.replace({...i.location,search:t.toString()})}),[s,i])]}function y(e){const{defaultValue:t,queryString:r=!1,groupId:i}=e,s=u(e),[o,c]=(0,n.useState)((()=>function(e){let{defaultValue:t,tabValues:r}=e;if(0===r.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!h({value:t,tabValues:r}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${r.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const n=r.find((e=>e.default))??r[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:t,tabValues:s}))),[l,d]=f({queryString:r,groupId:i}),[y,b]=function(e){let{groupId:t}=e;const r=function(e){return e?`docusaurus.tab.${e}`:null}(t),[i,s]=(0,p.Dv)(r);return[i,(0,n.useCallback)((e=>{r&&s.set(e)}),[r,s])]}({groupId:i}),m=(()=>{const e=l??y;return h({value:e,tabValues:s})?e:null})();(0,a.A)((()=>{m&&c(m)}),[m]);return{selectedValue:o,selectValue:(0,n.useCallback)((e=>{if(!h({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);c(e),d(e),b(e)}),[d,b,s]),tabValues:s}}var b=r(92303);const m={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var g=r(74848);function v(e){let{className:t,block:r,selectedValue:n,selectValue:o,tabValues:a}=e;const c=[],{blockElementScrollPositionUntilNextRender:l}=(0,s.a_)(),p=e=>{const t=e.currentTarget,r=c.indexOf(t),i=a[r].value;i!==n&&(l(t),o(i))},d=e=>{let t=null;switch(e.key){case"Enter":p(e);break;case"ArrowRight":{const r=c.indexOf(e.currentTarget)+1;t=c[r]??c[0];break}case"ArrowLeft":{const r=c.indexOf(e.currentTarget)-1;t=c[r]??c[c.length-1];break}}t?.focus()};return(0,g.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.A)("tabs",{"tabs--block":r},t),children:a.map((e=>{let{value:t,label:r,attributes:s}=e;return(0,g.jsx)("li",{role:"tab",tabIndex:n===t?0:-1,"aria-selected":n===t,ref:e=>c.push(e),onKeyDown:d,onClick:p,...s,className:(0,i.A)("tabs__item",m.tabItem,s?.className,{"tabs__item--active":n===t}),children:r??t},t)}))})}function w(e){let{lazy:t,children:r,selectedValue:s}=e;const o=(Array.isArray(r)?r:[r]).filter(Boolean);if(t){const e=o.find((e=>e.props.value===s));return e?(0,n.cloneElement)(e,{className:(0,i.A)("margin-top--md",e.props.className)}):null}return(0,g.jsx)("div",{className:"margin-top--md",children:o.map(((e,t)=>(0,n.cloneElement)(e,{key:t,hidden:e.props.value!==s})))})}function x(e){const t=y(e);return(0,g.jsxs)("div",{className:(0,i.A)("tabs-container",m.tabList),children:[(0,g.jsx)(v,{...t,...e}),(0,g.jsx)(w,{...t,...e})]})}function j(e){const t=(0,b.A)();return(0,g.jsx)(x,{...e,children:d(e.children)},String(t))}},28453:(e,t,r)=>{r.d(t,{R:()=>o,x:()=>a});var n=r(96540);const i={},s=n.createContext(i);function o(e){const t=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),n.createElement(s.Provider,{value:t},e.children)}}}]);