"use strict";(self.webpackChunkxceed_libs_doc=self.webpackChunkxceed_libs_doc||[]).push([[785],{85190:(e,i,t)=>{t.r(i),t.d(i,{assets:()=>u,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>c,toc:()=>p});var r=t(74848),n=t(28453),s=t(11470),l=t(19365);const a={title:"Performing multi-file GZip operations"},o="Multi-file operations",c={id:"code-snippets/tar-gzip-capabilities/creating-writing/performing-multifile-gzip-operation",title:"Performing multi-file GZip operations",description:"This topic demonstrates how to handle multiple files in a GZip archive: listing its contents and adding an item.",source:"@site/zip/code-snippets/tar-gzip-capabilities/creating-writing/performing-multifile-gzip-operation.md",sourceDirName:"code-snippets/tar-gzip-capabilities/creating-writing",slug:"/code-snippets/tar-gzip-capabilities/creating-writing/performing-multifile-gzip-operation",permalink:"/xceed-libs-doc/zip/code-snippets/tar-gzip-capabilities/creating-writing/performing-multifile-gzip-operation",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"Performing multi-file GZip operations"},sidebar:"sidebarzip",previous:{title:"Copying an item to a gzip file",permalink:"/xceed-libs-doc/zip/code-snippets/tar-gzip-capabilities/creating-writing/copy-item-gzip"},next:{title:"Copying items to Tar/Bzip2 archive",permalink:"/xceed-libs-doc/zip/code-snippets/tar-gzip-capabilities/creating-writing/copy-item-tarbzip2"}},u={},p=[{value:"Basic steps",id:"basic-steps",level:2},{value:"Demonstration",id:"demonstration",level:2},{value:"Things you should consider",id:"things-you-should-consider",level:2}];function d(e){const i={admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,n.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.header,{children:(0,r.jsx)(i.h1,{id:"multi-file-operations",children:"Multi-file operations"})}),"\n",(0,r.jsx)(i.p,{children:"This topic demonstrates how to handle multiple files in a GZip archive: listing its contents and adding an item."}),"\n",(0,r.jsxs)(i.p,{children:["Although Xceed\u2019s implementation of GZip allows you to read and create multi-file GZip archives, it is not recommended to store multiple files in a GZip archive, for two reasons. First, most popular archiving applications do not fully support multi-file GZip archives. Second, GZip archives possess no central header to indicate where each compressed file is stored, so when you extract a specific file from a GZip archive, each GZipped file preceding that file must first be decompressed. As a result, multi-file GZip archives can be very inefficient. It is strongly recommended that you combine the compression capabilities of GZip with the archiving capabilities of Tar instead. See the topics in the ",(0,r.jsx)(i.strong,{children:"Xceed Tar"})," book for details."]}),"\n",(0,r.jsxs)(i.p,{children:["To handle multi-file GZip archives, set the static boolean property ",(0,r.jsx)(i.code,{children:"AllowMultipleFiles"})," of the ",(0,r.jsx)(i.code,{children:"GZipArchive"})," class to true. By default, this property is set to false. If you attempt to create a multi-file GZip archive when this property is set to false, an exception will be thrown. If you attempt to read a multi-file GZip archive when this property is false, only the first file will be read"]}),"\n",(0,r.jsx)(i.admonition,{type:"note",children:(0,r.jsx)(i.p,{children:"FileSystem-based GZip is not currently available in Xceed's .NET Compact Framework products."})}),"\n",(0,r.jsx)(i.h2,{id:"basic-steps",children:"Basic steps"}),"\n",(0,r.jsx)(i.p,{children:"To list the contents of a multi-file GZip archive, the following steps must be performed:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsxs)(i.p,{children:["Set the static ",(0,r.jsx)(i.code,{children:"AllowMultipleFiles"})," property to true. If you do not do this, only the first file will be read. Note also that you must do this before retrieving the ",(0,r.jsx)(i.code,{children:"GZipArchive"})," reference."]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsxs)(i.p,{children:["Retrieve a reference to a GZip archive using the ",(0,r.jsx)(i.code,{children:"GZipArchive"})," class."]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsx)(i.p,{children:"Call the GetFiles method to retrieve a listing of the files contained within the GZip archive."}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsx)(i.p,{children:"You can now loop through the files and extract the desired information."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.p,{children:"To create a multi-file GZip archive, the following steps must be performed:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsxs)(i.p,{children:["Set the static ",(0,r.jsx)(i.code,{children:"AllowMultipleFiles"})," property to true."]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsxs)(i.p,{children:["Retrieve a reference to a GZip archive using the ",(0,r.jsx)(i.code,{children:"GZipArchive"})," class."]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsxs)(i.p,{children:["Retrieve a reference to a source using an ",(0,r.jsx)(i.code,{children:" "}),"-derived class."]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsxs)(i.p,{children:["Call the ",(0,r.jsx)(i.code,{children:"CopyFilesTo"})," method on the source, passing the destination GZip archive."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.admonition,{type:"note",children:(0,r.jsxs)(i.p,{children:["You should ",(0,r.jsx)(i.strong,{children:"always"})," pass ",(0,r.jsx)(i.em,{children:"false"})," (C#) or ",(0,r.jsx)(i.em,{children:"False"})," (VB.NET) to the ",(0,r.jsx)(i.em,{children:"recursive"})," parameter of the ",(0,r.jsx)(i.code,{children:"CopyFilesTo"})," method when copying to a ",(0,r.jsx)(i.code,{children:"GZipArchive"})," (the same applies to using the ",(0,r.jsx)(i.code,{children:"MoveFilesTo"})," method with a GZipArchive), because the GZip format does not allow subfolders. If you set the ",(0,r.jsx)(i.em,{children:"recursive"})," parameter to ",(0,r.jsx)(i.em,{children:"true/True"}),", and if there are subfolders present in the folder you are attempting to copy or move, an exception will be thrown."]})}),"\n",(0,r.jsx)(i.h2,{id:"demonstration",children:"Demonstration"}),"\n",(0,r.jsx)(i.p,{children:"This example demonstrates how to list the contents of a multi-file GZip archive."}),"\n",(0,r.jsxs)(s.A,{children:[(0,r.jsx)(l.A,{value:"csharp",label:"C#",default:!0,children:(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-csharp",children:'  using Xceed.GZip;\r\n  using Xceed.FileSystem; \r\n\r\n  //This property must be set before the GZipArchive is created.\r\n  GZipArchive.AllowMultipleFiles = true; \r\n\r\n  GZipArchive gzip = new GZipArchive( new DiskFile( @"c:\\test.gz" ) ); \r\n\r\n  foreach( AbstractFile f in gzip.GetFiles( true ) )\r\n  {\r\n      Console.WriteLine( f.FullName );\r\n  }\n'})})}),(0,r.jsx)(l.A,{value:"vb.net",label:"Visual Basic .NET",children:(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-vb.NET",children:'Imports Xceed.GZip\r\nImports Xceed.FileSystem\r\n\r\n\' This property must be set before the GZipArchive is created.\r\nGZipArchive.AllowMultipleFiles = True\r\n\r\nDim gzip As New GZipArchive(New DiskFile("c:\\test.gz"))\r\nDim f As AbstractFile\r\n\r\nFor Each f In gzip.GetFiles( True )\r\n  ListBox1.Items.Add( f.FullName )\r\nNext\n'})})})]}),"\n",(0,r.jsx)(i.p,{children:"This example demonstrates how to create a multi-file GZip archive."}),"\n",(0,r.jsxs)(s.A,{children:[(0,r.jsx)(l.A,{value:"csharp",label:"C#",default:!0,children:(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-csharp",children:'  using Xceed.GZip;\r\n  using Xceed.FileSystem; \r\n\r\n  // This property must be set before the GZipArchive is created.\r\n  GZipArchive.AllowMultipleFiles = true; \r\n\r\n  AbstractFolder source = new DiskFolder(@"c:\\temp");\r\n  AbstractFolder gzip = new GZipArchive(new DiskFile(@"c:\\test.gz")); \r\n\r\n  //The second parameter must false when using the CopyFilesTo method\r\n  //with a GZip archive; otherwise, an exception will be thrown if\r\n  //subfolders are present in the source.\r\n  source.CopyFilesTo(gzip, false, true);\n'})})}),(0,r.jsx)(l.A,{value:"vb.net",label:"Visual Basic .NET",children:(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-vb.NET",children:"Imports Xceed.GZip\r\nImports Xceed.FileSystem\r\n\r\n'This property must be set before the GZipArchive is created.\r\nGZipArchive.AllowMultipleFiles = True \r\n\r\nDim source As New DiskFolder(@\"c:\\temp\")\r\nDim gzip As New GZipArchive(new DiskFile(@\"c:\\test.gz\")) \r\n\r\n'The second parameter must False when using the CopyFilesTo\r\n'method with a GZip archive; otherwise, an exception will be\r\n'thrown if subfolders are present in the source.\r\n\r\nsource.CopyFilesTo(gzip, False, True)\n"})})})]}),"\n",(0,r.jsx)(i.h2,{id:"things-you-should-consider",children:"Things you should consider"}),"\n",(0,r.jsx)(i.p,{children:"The main questions you should ask yourself when performing these operations with a GZip archive are:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsxs)(i.p,{children:["Do you want to filter (specify specific files and folders) the items that are to be listed? Use ",(0,r.jsx)(i.code,{children:"filters"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsxs)(i.p,{children:["Do you want to retrieve a reference to a single GZipped file? Use the ",(0,r.jsx)(i.code,{children:"GetFile"})," method."]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:i}={...(0,n.R)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},19365:(e,i,t)=>{t.d(i,{A:()=>l});t(96540);var r=t(34164);const n={tabItem:"tabItem_Ymn6"};var s=t(74848);function l(e){let{children:i,hidden:t,className:l}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,r.A)(n.tabItem,l),hidden:t,children:i})}},11470:(e,i,t)=>{t.d(i,{A:()=>y});var r=t(96540),n=t(34164),s=t(23104),l=t(56347),a=t(205),o=t(57485),c=t(31682),u=t(70679);function p(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:i}=e;return!!i&&"object"==typeof i&&"value"in i}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function d(e){const{values:i,children:t}=e;return(0,r.useMemo)((()=>{const e=i??function(e){return p(e).map((e=>{let{props:{value:i,label:t,attributes:r,default:n}}=e;return{value:i,label:t,attributes:r,default:n}}))}(t);return function(e){const i=(0,c.XI)(e,((e,i)=>e.value===i.value));if(i.length>0)throw new Error(`Docusaurus error: Duplicate values "${i.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[i,t])}function h(e){let{value:i,tabValues:t}=e;return t.some((e=>e.value===i))}function m(e){let{queryString:i=!1,groupId:t}=e;const n=(0,l.W6)(),s=function(e){let{queryString:i=!1,groupId:t}=e;if("string"==typeof i)return i;if(!1===i)return null;if(!0===i&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:i,groupId:t});return[(0,o.aZ)(s),(0,r.useCallback)((e=>{if(!s)return;const i=new URLSearchParams(n.location.search);i.set(s,e),n.replace({...n.location,search:i.toString()})}),[s,n])]}function f(e){const{defaultValue:i,queryString:t=!1,groupId:n}=e,s=d(e),[l,o]=(0,r.useState)((()=>function(e){let{defaultValue:i,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(i){if(!h({value:i,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${i}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return i}const r=t.find((e=>e.default))??t[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:i,tabValues:s}))),[c,p]=m({queryString:t,groupId:n}),[f,g]=function(e){let{groupId:i}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(i),[n,s]=(0,u.Dv)(t);return[n,(0,r.useCallback)((e=>{t&&s.set(e)}),[t,s])]}({groupId:n}),b=(()=>{const e=c??f;return h({value:e,tabValues:s})?e:null})();(0,a.A)((()=>{b&&o(b)}),[b]);return{selectedValue:l,selectValue:(0,r.useCallback)((e=>{if(!h({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);o(e),p(e),g(e)}),[p,g,s]),tabValues:s}}var g=t(92303);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var v=t(74848);function x(e){let{className:i,block:t,selectedValue:r,selectValue:l,tabValues:a}=e;const o=[],{blockElementScrollPositionUntilNextRender:c}=(0,s.a_)(),u=e=>{const i=e.currentTarget,t=o.indexOf(i),n=a[t].value;n!==r&&(c(i),l(n))},p=e=>{let i=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const t=o.indexOf(e.currentTarget)+1;i=o[t]??o[0];break}case"ArrowLeft":{const t=o.indexOf(e.currentTarget)-1;i=o[t]??o[o.length-1];break}}i?.focus()};return(0,v.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,n.A)("tabs",{"tabs--block":t},i),children:a.map((e=>{let{value:i,label:t,attributes:s}=e;return(0,v.jsx)("li",{role:"tab",tabIndex:r===i?0:-1,"aria-selected":r===i,ref:e=>o.push(e),onKeyDown:p,onClick:u,...s,className:(0,n.A)("tabs__item",b.tabItem,s?.className,{"tabs__item--active":r===i}),children:t??i},i)}))})}function j(e){let{lazy:i,children:t,selectedValue:s}=e;const l=(Array.isArray(t)?t:[t]).filter(Boolean);if(i){const e=l.find((e=>e.props.value===s));return e?(0,r.cloneElement)(e,{className:(0,n.A)("margin-top--md",e.props.className)}):null}return(0,v.jsx)("div",{className:"margin-top--md",children:l.map(((e,i)=>(0,r.cloneElement)(e,{key:i,hidden:e.props.value!==s})))})}function w(e){const i=f(e);return(0,v.jsxs)("div",{className:(0,n.A)("tabs-container",b.tabList),children:[(0,v.jsx)(x,{...i,...e}),(0,v.jsx)(j,{...i,...e})]})}function y(e){const i=(0,g.A)();return(0,v.jsx)(w,{...e,children:p(e.children)},String(i))}},28453:(e,i,t)=>{t.d(i,{R:()=>l,x:()=>a});var r=t(96540);const n={},s=r.createContext(n);function l(e){const i=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function a(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:l(e.components),r.createElement(s.Provider,{value:i},e.children)}}}]);